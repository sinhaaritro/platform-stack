
---

- name: Add Docker GPG apt Key
  ansible.builtin.get_url:
  url: https://download.docker.com/linux/ubuntu/gpg
  dest: /etc/apt/trusted.gpg.d/docker.asc
  mode: '0644'
  force: true

- name: Add Docker Repository
  ansible.builtin.apt_repository:
  repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable
  state: present

- name: Install Docker packages
  ansible.builtin.apt:
    name:
    - docker-ce
    - docker-ce-cli
    - containerd.io
  state: present
  update_cache: yes

- name: Add dev user to the docker group
  ansible.builtin.user:

- name: dev
  groups: docker
  append: yes