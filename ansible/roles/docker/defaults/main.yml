# defaults/main.yml

# Packages to install (Modern Docker setup)
docker_packages:
  - docker-ce
  - docker-ce-cli
  - containerd.io
  - docker-buildx-plugin
  - docker-compose-plugin

# Architecture mapping for APT repository
docker_arch_mapping:
  x86_64: amd64
  aarch64: arm64

# Users to add to the 'docker' group
docker_users:
  - "{{ ansible_user | default('root') }}"

# Docker Daemon Configuration (JSON)
# Enable log rotation by default to prevent disk exhaustion
docker_daemon_config:
  log-driver: "json-file"
  log-opts:
    max-size: "10m"
    max-file: "3"
  # Add insecure-registries or dns settings here via group_vars
