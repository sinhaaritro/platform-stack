# https://taskfile.dev

version: "3"

includes:
  tofu:
    taskfile: ./tofu/Taskfile.yml
    dir: .
  ansible:
    taskfile: ./ansible/Taskfile.yml
    dir: .

tasks:
  default:
    desc: "Lists all available tasks from all included files."
    silent: true
    cmds:
      - task --list-all

  git:clone-repository:
    desc: "Clone the github repository"
    cmds:
      - |
        echo "Clone the github repository..."
        git clone git@github.com:sinhaaritro/platform-stack.git
        echo "Moving to the folder"
        cd platform-stack/
        echo "Use other tasks like `task --list-all`"
    preconditions:
      - sh: "! command -v git"
        msg: "Git is already installed."

  git:pull-git-changes:
    desc: "Pull Latest Changes"
    cmds:
      - |
        cd ~/platform-stack/
        git pull
    preconditions:
      - sh: "! command -v git"
        msg: "Git is already installed."
