# storage.yaml

# --- STORAGE SYSTEM 1: FOR LOCAL APPLICATION CONFIG ---

# PV for Application Config: Points to the local path inside the kind node.
apiVersion: v1
kind: PersistentVolume
metadata:
  name: obsidian-config-pv
spec:
  storageClassName: "standard"
  capacity:
    storage: 1Gi # Size is required, but less important for hostPath.
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/config # MUST MATCH the first path in kind-config.yaml

---
# PVC for Application Config: The "request coupon" for the app config storage.
# This MUST be in our new namespace.
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: obsidian-config-pvc
  namespace: obsidian
spec:
  storageClassName: "standard"
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi

# --- STORAGE SYSTEM 2: FOR NFS VAULT DATA ---

---
# PV for Vaults: Points to the NFS path inside the kind node.
apiVersion: v1
kind: PersistentVolume
metadata:
  name: obsidian-vaults-pv
spec:
  storageClassName: "standard"
  capacity:
    storage: 10Gi # Can be larger to reflect the share size.
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/vaults # MUST MATCH the second path in kind-config.yaml

---
# PVC for Vaults: The "request coupon" for the vault storage.
# This MUST also be in our new namespace.
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: obsidian-vaults-pvc
  namespace: obsidian
spec:
  storageClassName: "standard"
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
