# apiVersion: argoproj.io/v1alpha1
# kind: ApplicationSet
# metadata:
#   name: arr-apps
#   namespace: argocd
# spec:
#   generators:
#     - git:
#         repoURL: https://github.com/sinhaaritro/platform-stack.git
#         revision: HEAD
#         # Find all app.yaml files in the cluster directory
#         files:
#           - path: "kubernetes/clusters/arr/**/app.yaml"
#   template:
#     metadata:
#       name: "arr-{{appName}}"
#     spec:
#       project: default
#       source:
#         repoURL: https://github.com/sinhaaritro/platform-stack.git
#         targetRevision: HEAD
#         path: "{{path.directory}}"
#       destination:
#         server: https://arr-api.example.com:6443
#         namespace: "{{namespace}}"
#       syncPolicy:
#         automated:
#           prune: true
#           selfHeal: true
#         syncOptions:
#           - CreateNamespace=true
#           - Replace=true
#         retry:
#           limit: 10
#           backoff:
#             duration: "5s"
#             factor: 2
#             maxDuration: "3m"
