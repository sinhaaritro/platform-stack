grafana:
  enabled: true
  adminPassword: "admin"
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
  additionalDataSources:
    - name: Loki
      type: loki
      url: http://loki-gateway.logging.svc.cluster.local
      access: proxy
      isDefault: false
      jsonData:
        derivedFields:
          - datasourceUid: tempo
            matcherRegex: "traceID=(\\w+)"
            name: TraceID
            url: "$${__value.raw}"
    - name: Mimir
      type: prometheus
      url: http://mimir-nginx.monitoring.svc:80/prometheus
      access: proxy
      isDefault: false
      jsonData:
        timeInterval: "15s"

  persistence:
    enabled: true
    type: statefulset
    storageClassName: "longhorn0rep"
    size: 2Gi

prometheus:
  enabled: true
  prometheusSpec:
    retention: 10d
    retentionSize: "4GB"
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: "longhorn0rep"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 5Gi
    remoteWrite:
      - url: http://mimir-distributor.monitoring.svc:8080/api/v1/push
        headers:
          X-Scope-OrgID: anonymous

alertmanager:
  enabled: true

prometheus-node-exporter:
  hostNetwork: false
  service:
    port: 9100
    targetPort: 9100
